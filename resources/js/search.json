[[{"l":"Welcome","p":["The federated application shell for Workleap apps"]}],[{"l":"Getting started","p":["Welcome to the @squide documentation. This page will give you an overview of @squide and a quick start to configure a new federated application from nothing."]},{"l":"Overview","p":["We built this shell to facilitate the adoption of federated applications at Workleap by enforcing patterns that we believe will help feature teams successfully implement a distributed architecture.","The shell itself is a very thin API layer on top of Webpack Module Federation and React Router with the goal of maximizing both libraries forces and staying as most as possible out of their ways."]},{"i":"why-webpack-module-federation","l":"Why Webpack Module Federation?","p":["We identified 2 major problems with frontend federated applications:","How to prevent loading the same large dependencies twice when switching between modules?","How to offer a cohesive experience that doesn't feels modular?","We believe Webpack Module Federation solves the first problem by offering a mecanism capable of deduping at runtime the common dependencies shared by the host application and the remote modules.","With this mecanism in place, all federated parts of an application can now be loaded in the same browsing context instead of nested browsing contexts (like iframes).","By sharing the same browsing context (e.g. the same Document, the same Window object, and the same DOM), federated parts are now unified and form a single application, which solves the second issues.","With Webpack Module Federation, we think that we have the possibility of developing federated applications that feels like monolithic applications from a user perspective."]},{"i":"why-react-router","l":"Why React Router?","p":["Well, what would you rather use? Joking aside, React Router version 6 nesting routing feature is ideal for federated application as it makes the UI heavily composable and decoupled."]},{"l":"Guiding principles","p":["While developing the API of @squide, we had a few guiding principles in mind. Those principles are not settled stones, you might want to diverge from them from time to time, but adhering to those will make your experience more enjoyable.","A module should always match a subdomain of the application business domain and should only export pages.","A module should be fully autonomous. It shouldn't have to coordinate with other parts of the application for things as trivial as navigation links.","A federated application should feel homogenous. Different parts of a federation application should have the ability to communicate with each others and react to changes happening outside of their boundaries.","Data and state should never be shared between parts of a federated application. Even if two parts needs the same data or the same state values, they should load, store and manage those independently."]},{"l":"Quick start"},{"l":"Install the packages","p":["Open a terminal at the root of the host application project and install the following packages:","Then open a terminal at the root of every remote module project and install the following packages:"]},{"l":"Configure the host application","p":["TBD"]},{"l":"Configure a remote application","p":["TBD"]}],[{"l":"Guides"}],[{"l":"Reference"},{"l":"Runtime","p":["RuntimeContext","useRuntime","useRoutes","useNavigationItems","useLogger","useService","useServices","useSession"]},{"l":"Registration","p":["registerLocalModule","registerRemoteModule","registrationStatus","useAreRemotesReady"]},{"l":"Routing","p":["useHoistedRoutes","useRenderedNavigationItems"]},{"l":"Logging","p":["Logger","ConsoleLogger"]},{"l":"Messaging","p":["EventBus","useEventBusDispatcher","useEventBusListener"]},{"l":"Webpack","p":["hostTransformer","remoteTransformer"]},{"l":"Fakes","p":["The @squide/fakes package is a collection of fake implementations offered to accelerate the setup of an isolated enviroment to develop a module.","SessionManager"]}],[{"l":"Runtime","p":["A runtime instance give modules access to functionalities such as routing, navigation and logging."]},{"l":"Reference"},{"l":"Parameters","p":["options: An optional object literal of options.","loggers: An optional array of Logger instances.","services: An optional string-keyed object literal of custom service instances.","sessionAccessor: An optional function returning the current session."]},{"l":"Usage"},{"l":"Create a Runtime instance"},{"l":"Register routes","p":["A @squide route accept any properties of a React Router Route component with the addition of an hoist property."]},{"l":"Register an hoisted page","p":["Unlike a regular page, a hoisted page is added at the root of the router, outside of the boundaries of the host application's root layout. This means that a hoisted page has full control over its rendering.","Setup the host application for hoisted routes"]},{"l":"Register navigation items","p":["A @squide navigation item can either be a NavigationLink or a NavigationSection. Both types can be intertwined to create a multi-level menu hierarchy. A NavigationSection item is used to setup a new level while a NavigationLink define a link.","NavigationSection accept the following properties:","label: The section text.","children: The section content.","priority: An order priority affecting the position of the item in the menu (higher first)","addiltionalProps: Additional properties to be forwarded to the section renderer.","NavigationLink accept any properties of a React Router Link component with the addition of:","label: The link text.","additionalProps: Additional properties to be forwarded to the link renderer.","Setup the host application to render navigation items"]},{"l":"Register nested navigation items"},{"l":"Sort registered navigation items","p":["A priority property can be added to a navigation item to affect it's position in the menu. The sorting algorithm is as follow:","By default a navigation item have a priority of 0.","If no navigation item have a priority, the items are positioned according to their registration order.","If an item have a priority 0, the item will be positioned before any other items with a lower priority (or without an explicit priority value).","If an item have a priority 0, the item will be positioned after any other items with a higher priority (or without an explicit priority value)."]},{"l":"Use a React Element as navigation item label"},{"l":"Style a navigation item"},{"l":"Open a navigation link in a new tab"},{"l":"Render additional props on a navigation item"},{"l":"Use the logger"},{"l":"Use the event bus"},{"l":"Retrieve a service"},{"l":"Retrieve the current session"}],[{"l":"RuntimeContext","p":["React context to share a Runtime instance between an host application and the application modules."]},{"l":"Reference"},{"l":"Parameters","p":["value: A Runtime instance."]},{"l":"Usage"},{"l":"Provide a Runtime instance"},{"l":"Retrieve a Runtime instance"}],[{"l":"useRuntime","p":["Retrive a shared Runtime instance.","When possible, prefer useRoutes, useNavigationItems, useLogger, useServices, useService to useRuntime."]},{"l":"Reference"},{"l":"Parameters","p":["None"]},{"l":"Returns","p":["A Runtime instance."]},{"l":"Usage"}],[{"l":"useRoutes","p":["Retrieve the registered routes from the Runtime instance provided by RuntimeContext."]},{"l":"Reference"},{"l":"Parameters","p":["None"]},{"l":"Returns","p":["An array of Route."]},{"l":"Usage"}],[{"l":"useNavigationItems","p":["Retrieve the registered navigation items from the Runtime instance provided by RuntimeContext."]},{"l":"Reference"},{"l":"Parameters","p":["None"]},{"l":"Returns","p":["An array of NavigationItem."]},{"l":"Usage"}],[{"l":"useLogger","p":["Retrieve a RuntimeLogger instance from the Runtime instance provided by RuntimeContext."]},{"l":"Reference"},{"l":"Parameters","p":["None"]},{"l":"Returns","p":["A RuntimeLogger instance."]},{"l":"Usage"}],[{"l":"useService","p":["Retrieve a custom service from the Runtime instance provided by RuntimeContext."]},{"l":"Reference"},{"l":"Parameters","p":["name: A custom service instance name."]},{"l":"Returns","p":["A service instance or undefined if the specified service name doesn't match any registered instance."]},{"l":"Usage"}],[{"l":"useServices","p":["Retrieve a string-keyed object literal of custom service instances from the Runtime instance provided by RuntimeContext."]},{"l":"Reference"},{"l":"Parameters","p":["None"]},{"l":"Returns","p":["A string-keyed object literal of custom service instances."]},{"l":"Usage"}],[{"l":"useSession","p":["Retrieve the current session from the Runtime instance provided by RuntimeContext."]},{"l":"Reference"},{"l":"Parameters","p":["None"]},{"l":"Returns","p":["A custom session object."]},{"l":"Usage"}],[{"l":"registerLocalModule","p":["Register one or many local module(s). During registration, the provided registration function will be called with a Runtime instance and an optional context object.","A local module is a module that is bundled at build time rather than at runtime like a remote module. Local modules are useful while migrating from a monolithic application to a distributed application or launching new products."]},{"l":"Reference"},{"l":"Parameters","p":["registerFunctions: An array of ModuleRegisterFunction.","runtime: A Runtime instance.","options: An optional object literal of options.","context: An optional context object that will be pass to the registration function."]},{"l":"Returns","p":["Nothing"]},{"l":"Usage"}],[{"l":"registerRemoteModule","p":["Register one or many remote module(s). During registration, the module register function will be called with a Runtime instance and an optional context object."]},{"l":"Reference"},{"l":"Parameters","p":["remotes: An array of RemoteDefinition(view the Remote definition section).","runtime: A Runtime instance.","options: An optional object literal of options.","context: An optional context object that will be pass to the registration function."]},{"l":"Returns","p":["A Promise object with an array of [RegistrationError] if any happens during the registration."]},{"l":"Usage"},{"l":"Remote definition","p":["To ease the configuration of remote modules, make sure that you first import the RemoteDefinition type and assign it to your remote definitions array declaration."]},{"l":"Name","p":["The name property of a remote definition must match the name property defined in the remote module ModuleFederationPlugin configuration.","If you are using @squide remoteTransformer function to add the ModuleFederationPlugin to the remote module Webpack configuration object, the remote module name is the second argument of the remoteTransformer function.","In the following exemple, the remote module name is remote1.","Have a look at the remoteTransformer function"]},{"l":"Url","p":["The url property of a remote definition must match the publicPath of the remote module Webpack configuration object.","In the following exemple, the remote module publicPath is http://localhost:8081."]}],[{"l":"registrationStatus","p":["Variable indicating whether or not the remote modules registration is completed."]},{"l":"Usage"}],[{"l":"useAreRemotesReady","p":["Force the application to re-render once the remote modules are registered. Without this hook, the page is rendered with an empty router as it happens before the remote modules registered their routes and navigation items.","Only use this hook if your application has remote modules."]},{"l":"Reference"},{"l":"Parameters","p":["options: An optional object literal of options.","interval: The interval in milliseconds at which the hook is validating if the registration process is completed."]},{"l":"Returns","p":["A boolean indicating if the registration is completed."]},{"l":"Usage"}],[{"l":"useHoistedRoutes","p":["Let modules register pages outside of the default application layout, error boundary or authentication boundary.","Unlike a regular page, a hoisted page is added at the root of the router, outside of the boundaries of the host application's root layout. This means that a hoisted page has full control over its rendering.","By declaring a page as hoisted, other parts of the application will not be isolated anymore from this page's failures as the page will be rendered outside of the host application's root error boundary. To avoid breaking the entire application when an hoisted page cause unmanaged errors, it is highly recommended to set a React Router errorElement property for every hoisted page."]},{"l":"Reference"},{"l":"Parameters","p":["routes: An array of Route to process.","wrapManagedRoutes: A function nesting the managed routes under React elements such as a layout, an error boundary or an authentication boundary.","options: An optional object literal of options.","allowedPaths: An optional array of exclusive route paths available for hosting."]},{"l":"Returns","p":["An array of Route."]},{"l":"Usage"},{"l":"Hoist a module page"},{"l":"Register a module page with a different layout"},{"l":"Register a public page"},{"l":"Allowing an exclusive set of routes to be hoisted"}],[{"l":"useRenderedNavigationItems","p":["Recursively parse a navigation items structure to transform the items into React Elements.","The useNavigationItems hook returns the navigation items tree structure as is, meaning you'll still have to recursively parse the structure to transform the items into actual React Elements.","As it's a non-trivial process, the shell provides this utility hook to help with that."]},{"l":"Reference"},{"l":"Parameters","p":["navigationItems: An array of NavigationItem to render.","renderItem: A function to render a single link from a navigation item","renderSection: A function to render a section from a collection of items."]},{"l":"Returns","p":["An array of ReactElement."]},{"l":"Usage"}],[{"l":"ConsoleLogger","p":["A basic console logger."]},{"l":"Reference"},{"l":"Parameters","p":["logLevel: An optional minimum level for the logger to output a log entry to the console (default is LogLevel.critical)."]},{"l":"Usage"}],[{"l":"Logger","p":["A basic logger interface."]},{"l":"Usage"}],[{"l":"EventBus","p":["A basic implementation of a pub/sub mecanism enabling loosely coupled between the host application the remote modules."]},{"l":"Reference"},{"l":"Parameters","p":["options: An optional object literal of options.","logger: An optional logger to facilitate debugging."]},{"l":"Usage"},{"l":"Create an EventBus instance"},{"l":"Add a listener","p":["When possible, prefer useEventBusListener to eventBus.addListener."]},{"l":"Remove a listener"},{"l":"Dispatch an event","p":["When possible, prefer useEventBusDispatcher to eventBus.dispatch."]}],[{"l":"useEventBusDispatcher","p":["Retrieve an EventBus instance from the Runtime instance provided by RuntimeContext and provide a function to dispatch an event."]},{"l":"Reference"},{"l":"Parameters","p":["None"]},{"l":"Returns","p":["A dispatch function."]},{"l":"Usage"}],[{"l":"useEventBusListener"},{"l":"Reference"},{"l":"Parameters","p":["eventName: The name of the event to listen for.","callback: A function to be executed when a event matching the provided name is dispatched.","options: An optional object literal of options.","once: Whether or not the event listener should be automatically removed once an event as been handled."]},{"l":"Returns","p":["Nothing"]},{"l":"Usage"}],[{"l":"hostTransformer","p":["Add to an existing Webpack configuration object a ModuleFederationPlugin plugin instance pre-configured for a @squide host application."]},{"l":"Reference"},{"l":"Parameters","p":["config: A Webpack configuration object.","name: The host application name.","options: An optional object literal of options.","router: An optional router identifier (default is react-router).","pluginOptions: An optional object literal of ModuleFederationPlugin options."]},{"l":"Returns","p":["A Webpack configuration object enriched with a ModuleFederationPlugin plugin instance."]},{"l":"Default shared dependencies","p":["The hostTransformer function will add the following shared dependencies as singleton by default:","react","react-dom","react-router-dom","@squide/core","@squide/react-router","@squide/webpack-module-federation","For the full shared dependencies configuration, have a look at the configTransformer.ts file on Github."]},{"l":"Usage"},{"l":"Transform a Webpack config"},{"l":"Specify additional shared dependencies","p":["Additional shared dependencies must be configured on the host application as well as every remote module."]},{"l":"Override a default shared dependency"}],[{"l":"remoteTransformer","p":["Add to an existing Webpack configuration object a ModuleFederationPlugin plugin instance pre-configured for a @squide remote module application."]},{"l":"Reference"},{"l":"Parameters","p":["config: A Webpack configuration object.","name: The remote application name.","options: An optional object literal of options.","router: An optional router identifier (default is react-router).","pluginOptions: An optional object literal of ModuleFederationPlugin options."]},{"l":"Returns","p":["A Webpack configuration object enriched with a ModuleFederationPlugin plugin instance."]},{"l":"Conventions","p":["To fulfil @squide remote module requirements, the remoteTransformer function will pre-configure the ModuleFederationPlugin with the following filename and exposes properties.","If the remote module publicPath is http://localhost:8081, the remote module bundle is available at http://localhost:8081/remoteEntry.js."]},{"l":"Default shared dependencies","p":["The remoteTransformer function will add the following shared dependencies as singleton by default:","react","react-dom","react-router-dom","@squide/core","@squide/react-router","@squide/webpack-module-federation","For the detailed configuration of the shared dependencies, have a look at the configTransformer.ts file on Github."]},{"l":"Usage"},{"l":"Transform a Webpack config"},{"l":"Specify additional shared dependencies","p":["Additional shared dependencies must be configured on the host application as well as every remote module."]},{"l":"Override a default shared dependency"},{"l":"Expose an additional module"}],[{"l":"SessionManager","p":["A local session manager strictly for development purpose."]},{"l":"Reference"},{"l":"Parameters","p":["options: An optional object literal of options.","key: An optional key identifying the session in localStorage."]},{"l":"Usage"},{"l":"Create a SessionManager instance"},{"l":"Set a session"},{"l":"Get the current session"},{"l":"Clear the current session"},{"l":"Integrate with a Runtime instance"}],[{"l":"About","p":["To ask a question or propose an idea, feel free to start a new discussion on Github. If you found a bug, please open an issue on Github."]},{"l":"License","p":["See the @squide LICENSE on Github."]}]]